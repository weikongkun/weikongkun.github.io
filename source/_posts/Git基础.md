---
title: Git基础
tags: Git
categories: Git
---

# Git基础 #

## 1、获取Git仓库

#### （1）在现有目录下初始化仓库

    git init
该命令将创建一个名为.git的目录，这个字目录含有初始化的Git仓库中所有的必须文件，这些文件是Git仓库的骨干。但是这个时候只是做了一个初始化的操作。
#### （2）克隆现有的仓库

如果想参与某个项目的开发，贡献自己的一份力，这是需要用`git clone`命令，clone是负值Git仓库服务器上的几乎所有数据，不仅仅是复制文件，执行`git clone`命令的时候，默认复制远程仓库每一个文件的每一个版本（分支）都将被拉取下来。

    git clone [url]

Git支持多种传输协议：`http://`协议，`git://`协议，`SSH`传输协议
## 2、记录每次更新到仓库
>现在我们手上有了一个真实项目的 Git 仓库，并从这个仓库中取出了所有文件的工作拷贝。 接下来，对这些文件做些修改，在完成了一个阶段的目标之后，提交本次更新到仓库。

>请记住，你工作目录下的每一个文件都不外乎这两种状态：已跟踪或未跟踪。 已跟踪的文件是指那些被纳入了版本控制的文件，在上一次快照中有它们的记录，在工作一段时间后，它们的状态可能处于未修改，已修改或已放入暂存区。 工作目录中除已跟踪文件以外的所有其它文件都属于未跟踪文件，它们既不存在于上次快照的记录中，也没有放入暂存区。 初次克隆某个仓库的时候，工作目录中的所有文件都属于已跟踪文件，并处于未修改状态。

>编辑过某些文件之后，由于自上次提交后你对它们做了修改，Git 将它们标记为已修改文件。 我们逐步将这些修改过的文件放入暂存区，然后提交所有暂存了的修改，如此反复。所以使用Git时文件的生命周期如下：  
>
>![](https://i.imgur.com/3eRryZ0.png)

#### （1）检查文件状态
检查文件处于什么状态，用`git status`命令。
当克隆玩仓库后使用此命令，会提示工作目录非常干净，意思是已跟踪文件最近没有被修改过，并且目录下没有出现处于任何跟踪状态的新文件，否则Git会列出来。
#### （2）跟踪新文件 ####
    git add 文件名
#### （3）暂存已修改文件 ####
    git add
这是一个多功能命令：

-  开始跟踪新文件
-  把已跟踪的文件放在暂存区
-  用于合并时把有冲突的文件标记为已解决状态等

将这个命令理解为“添加内容到下一次提交出”而不是“将一个文件添加到项目中”要更加合适。
#### （4）忽略文件 ####
一般有些文件不需要纳入Git的管理，不希望他们总出现在未跟踪文件列表，比如日志文件啊。这时可以创建一个名为`.gitignore`的文件，列出要忽略的文件模式。

    $cat.gitignore
    *.[oa]
    *~
>第一行告诉 Git 忽略所有以 .o 或 .a 结尾的文件。一般这类对象文件和存档文件都是编译过程中出现的。 第二行告诉 Git 忽略所有以波浪符（~）结尾的文件，许多文本编辑软件（比如 Emacs）都用这样的文件名保存副本。 此外，你可能还需要忽略 log，tmp 或者 pid 目录，以及自动生成的文档等等。 要养成一开始就设置好 .gitignore 文件的习惯，以免将来误提交这类无用的文件。

#### （4）查看暂存和未暂存的修改 ####
    git diff //修改之后还没有暂存起来的变化内容。
    git diff --cached //工作目录中当前文件和暂存区域快照之间的差异
#### （5）提交更新 ####
    git commit
#### （6）跳过暂存区域 ####
尽管使用暂存区域的方式可以精心准备要提交的细节，但有时候这么做略显繁琐。 Git 提供了一个跳过使用暂存区域的方式， 只要在提交的时候，给 `git commit` 加上 -a 选项，Git 就会自动把所有已经跟踪过的文件暂存起来一并提交，从而跳过 `git add `步骤。
#### （7）移除文件 ####
如果删除在“未暂存清单”的文件：

    git status
    git rm 文件名
另外一种情况是，我们想把文件从 Git 仓库中删除（亦即从暂存区域移除），但仍然希望保留在当前工作目录中。 换句话说，你想让文件保留在磁盘，但是并不想让 Git 继续跟踪。 当你忘记添加 .gitignore 文件，不小心把一个很大的日志文件或一堆 .a 这样的编译生成文件添加到暂存区时，这一做法尤其有用。 为达到这一目的，使用 `--cached` 选项：

    $ git rm --cached README

## 3、查看提交历史 ##
    git log
默认不用任何参数的话，git log 会按提交时间列出所有的更新，最近的更新排在最上面。 正如你所看到的，这个命令会列出每个提交的 SHA-1 校验和、作者的名字和电子邮件地址、提交时间以及提交说明。

`git log ` 有许多选项可以帮助你搜寻你所要找的提交



- -p   用来显示每次提交的内容差异，也可以再加上-2来仅显示最近两次提交。
- --stat 如果想看到每次提交的简略的统计信息。

## 4、撤销操作 ##

#### （1）撤消操作 ####
    git commit -amend //这个命令会将暂存区的文件提交。如果自  
    上次提交以来你未做任何修改，那么快照会保持不变，而你所修改 
    的知识提交信息
#### （2）取消暂存的文件 ####
    git reset HEAD 文件名
#### （3）撤销对文件的修改 ####
    git checkout -- 文件名
## 5、远程仓库的使用 ##
#### （1）查看远程仓库 ####
如果想查看已经配置的远程仓库服务器，可以运行`git remote`命令，他会列出你指定的每一个远程服务器的简写。
也可以指定选项`-v`，会显示需要读写远程仓库使用的Git保存的简写与其对应的URL。
#### （2）添加远程仓库 ####
    $ git remote
    origin
    $ git remote add pb https://github.com/paulboone/ticgit//添加远程仓库
    $ git remote -v
    origin	https://github.com/schacon/ticgit (fetch)
    origin	https://github.com/schacon/ticgit (push)
    pb	https://github.com/paulboone/ticgit (fetch)
    pb	https://github.com/paulboone/ticgit (push)
现在可以在命令行使用字符串pb来代替整个URL。
例如，想要拉取Paul的仓库中有但你没有的信息，可以运行`git fetch pb`
#### (3)从远程仓库中抓取和拉取 ####
从远程仓库中获得数据，可以执行
    git fetch [remote-name]
这个命令会访问远程仓库，从中拉取所有你还没有的数据。执行完成后，你将会拥有那个远程仓库中所有的分支引用，可以随时合并查看。

如果使用`clone`命令克隆了一个仓库，命令会自动将其添加为远程仓库并默认以"origin"为简写。
注意"fetch"命令会将数据拉取到你的本地仓库，但并不会自动合并或修改你当前的工作。当准备好时你必须手动将其合并入你的工作。  

如果你有一个分支设置为跟踪一个远程分支，可以使用`git pull`命令来自动抓取然后合并远程分支到当前分支。
#### （4）推送到远程仓库 ####
当你想分享你的项目时，必须将其推送到上游：

    git push [remote-name] [branch-name]

当你想将master分支推送到origin服务器时，运行如下命令可以将你所做的备份到服务器

    git push origin master

#### （5）查看远程仓库 ####
如果想要查看某一个远程仓库的信息，可以使用  
    `git remote show [remote-name]`  

#### （6）远程仓库的移除和重命名 ####
如果想要重命名引用的名字可以运行`git remote  rename`去修改一个远程仓库的简写名 。

如果因为一些原因想要移除一个远程仓库：
    git remote rm 仓库名  

## 6、打标签 ##
#### （1）列出标签 ####

    git tag 

#### （2）创建标签 ####
- 附注标签：`git tag -a v1.4 -m 'my version 1.4'`
- 轻量标签：`git tag v1.4-lw //不需要使用-a -s 或 -m选项，只需要提供标签名字`

#### （3）后期打标签 ####
    git tag -a v1.2 部分校验和
#### （4）共享标签 ####
默认情况下，`git push`命令并不会传送标签到远程仓库服务器上，在创建完标签后你必须显示的推送标签到共享服务器上，这个时候就像共享远程分支一样，可以运行：  

    git push origin [tagname]  

## 7、Git别名 ##
为每一个命令设置别名，比如：
      
    git config -global alias.co checkout

commit用ci来代替  

**参考**：[http://git-scm.com](http://git-scm.com)
    


​    